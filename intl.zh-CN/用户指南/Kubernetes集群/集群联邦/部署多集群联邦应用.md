# 部署多集群联邦应用 {#task_593302 .task}

-   您已经成功创建两个 Kubernetes 集群，参见[创建Kubernetes集群](intl.zh-CN/用户指南/Kubernetes集群/集群管理/创建Kubernetes集群.md#)。
-   通过[CloudShell](intl.zh-CN/用户指南/Kubernetes集群/集群管理/在CloudShell上通过kubectl管理Kubernetes集群.md#) 连接 Kubernetes 集群。
-   您已经成功部署集群联邦，参见[部署集群联邦](intl.zh-CN/用户指南/Kubernetes集群/集群联邦/部署集群联邦.md#)。

1.  创建并拷贝以下内容到federated-namespace.yaml文件中，并在主集群上cluster1执行`kubectl apply -f federated-namespace.yaml`命令，创建FederatedNamespace。 

    ``` {#codeblock_phu_2o5_dd2}
    apiVersion: v1
    kind: Namespace
    metadata:
      name: test-namespace
    ---
    apiVersion: types.federation.k8s.io/v1alpha1
    kind: FederatedNamespace
    metadata:
      name: test-namespace
      namespace: test-namespace
    spec:
      placement:
        clusterNames:
        - cluster1
        - cluster2
    ```

2.  创建并拷贝以下内容到federated-deployment.yaml文件中，并在主集群上cluster1执行`kubectl apply -f federated-deployment.yaml`命令，部署FederatedDeployment。 

    ``` {#codeblock_4k4_h34_77m}
    apiVersion: types.federation.k8s.io/v1alpha1
    kind: FederatedDeployment
    metadata:
      name: test-deployment
      namespace: test-namespace
    spec:
      template:
        metadata:
          labels:
            app: nginx
        spec:
          replicas: 2
          selector:
            matchLabels:
              app: nginx
          template:
            metadata:
              labels:
                app: nginx
            spec:
              containers:
              - image: nginx
                name: nginx
                resources:
                  limits:
                    cpu: 500m
                  requests:
                    cpu: 200m
      placement:
        clusterNames:
        - cluster1
        - cluster2
    ```

3.  执行如下命令，查看联邦集群中各个Deployment详情。 当看到如下信息时，表示应用部署完成。

    ``` {#codeblock_gvn_j5p_28s}
    kubectl get deployment -n test-namespace --context cluster1
    NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
    test-deployment   2         2         2            2           71s
    kubectl get deployment -n test-namespace --context cluster2
    NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
    test-deployment   2         2         2            2           77s
    ```


