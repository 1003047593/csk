# 通过控制台使用OSS静态存储卷

本文主要为您介绍如何通过控制台使用OSS静态存储卷。

您已经创建OSS静态存储卷，请参见[创建存储空间](/cn.zh-CN/快速入门/创建存储空间.md)。

**说明：** 相同Region的OSS Bucket可以使用内网地址进行挂载。

## 创建PV

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**Serverless集群**。

3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。

4.  在集群管理页左侧导航栏中，单击**存储卷**。

5.  单击**存储卷**页签，在**存储卷**页面单击右上角的**创建**。

6.  在**创建存储卷**对话框中配置参数。

    |参数|描述|
    |--|--|
    |**存储卷类型**|支持云盘/NAS/OSS三种云存储类型。本文中选择为OSS。|
    |**名称**|创建的数据卷的名称。数据卷名在集群内必须唯一。本例为pv-oss。|
    |**存储驱动**|支持Flexvolume和CSI。本文中选择为 CSI。|
    |**总量**|所创建存储卷的容量。|
    |**访问模式**|默认为ReadWriteMany。|
    |**AccessKey ID**|访问OSS所需的AccessKey。|
    |**AccessKey Secret**|
    |**可选参数**|您可以为OSS存储卷输入定制化参数，格式为`-o *** -o ***`。|
    |**Bucket ID**|您要使用的OSS bucket的名称。单击**选择 Bucket**，在弹出的对话框中选择所需的bucket并单击**选择**。|
    |**访问域名**|您可以参考以下情况选择需要的访问域名。    -   如果Bucket和ECS实例位于不同地域（Region），请选择**外网域名**。
    -   如果Bucket和ECS实例位于相同地域，需要根据集群网络类型进行选择：
        -   若是VPC网络，请选择**VPC域名**。
        -   若是经典网络，请选择**内网域名**。 |
    |**标签**|为该存储卷添加标签。|

7.  参数配置完成后，单击**创建**。


## 创建PVC

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**Serverless集群**。

3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。

4.  在集群管理页左侧导航栏中，单击**存储卷**。

5.  在**存储声明**页签，单击右上角的**创建**。

6.  在创建存储声明页面中，填写界面参数。

    |参数|描述|
    |--|--|
    |**存储声明类型**|支持云盘/NAS/OSS三种云存储类型。本文中选择OSS。|
    |**名称**|创建的数据卷的名称，数据卷名在集群内必须唯一。|
    |**分配模式**|选择已有存储卷。**说明：** 若未创建存储卷，您可以设置**分配模式**为**创建存储卷**，配置创建存储卷参数，详情请参见[\#d7e20](#d7e20)。 |
    |**已有存储卷**|单击**选择已有存储类**，在目标存储卷右侧操作列单击**选择**，选择存储卷。|
    |**总量**|所创建存储卷的容量。**说明：** 所创建的存储卷容量不能超过磁盘容量。 |

7.  单击**创建**。

    创建成功后可以在列表中看到csi-oss-pvc，并且已绑定相应的存储卷。


## 创建应用

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**Serverless集群**。

3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。

4.  在集群管理页左侧导航栏中，单击**工作负载**。

5.  在**无状态**页签中，单击**使用镜像创建**。

6.  在**应用基本信息**页签中，设置应用的基本信息。

    ![基本配置](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0885659951/p10973.png)

    |配置项|描述|
    |---|--|
    |应用名称|设置应用的名称。|
    |命名空间|设置应用部署所处的命名空间，默认使用default命名空间。|
    |副本数量|即应用包含的Pod数量，默认数量为2。|
    |类型|定义资源对象的类型，可选择**无状态**、**有状态**、**任务**、**定时**、**定时任务**、**守护进程集**。|
    |标签|为该应用添加一个标签，标识该应用。|
    |注解|为该应用添加一个注解（annotation）。|
    |时区同步|容器与节点是否使用相同的时区。|

    **说明：** 本例中选择**无状态**类型，即Deployment类型。

7.  单击**下一步**。

8.  设置容器配置。

    本例主要为您介绍数据卷的配置。其他界面参数请参见[使用镜像创建无状态Deployment应用](/cn.zh-CN/Kubernetes集群用户指南/应用管理/使用镜像创建无状态Deployment应用.md)。

    数据卷支持配置本地存储和云存储。

    -   **本地存储**：支持主机目录（HostPath）、配置项（ConfigMap）、保密字典（Secret）和临时目录，将对应的挂载源挂载到容器路径中。更多信息参见 [volumes](https://kubernetes.io/docs/concepts/storage/volumes/?spm=0.0.0.0.8VJbrE)。
    -   **云存储**：支持云存储类型。
    本例中配置了一个OSS类型的数据卷，将该OSS存储卷挂载到容器中/tmp 路径下。

    ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0885659951/p69158.png)

9.  单击**下一步**。

10. 所有的信息都配置完成后，单击**创建**。

    创建成功后，您就可以正常使用数据卷。


您也可以通过命令行的方式使用OSS静态存储卷，请参见[通过YAML使用OSS静态存储卷](/cn.zh-CN/Serverless Kubernetes集群用户指南/存储管理-CSI/OSS存储卷/通过YAML使用OSS静态存储卷.md)。

